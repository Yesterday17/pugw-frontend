---
title: 模块与管道管理
lang: zh-CN
---

# 模块与管道管理

::: danger 实现进度
- `pug-backend`：0%
- `pugw-frontend`：0%
:::

管道（Pipe）是 PUG 中最小的单元，负责单一的功能。管道的可用种类在 PUG 编译后已经确定，无法在运行时修改（Plugin 系统尚未实现）。

管道依托模块（Module）存在，模块作为一类管道的集合，起命名空间的作用。

由于模块的静态性，因此对模块的管理也不存在删除这一选项，只能禁用。只有管理员用户可以选择全站禁用的模块或管道。

## GET /module

获取可用的模块列表。返回可用模块的 `JSON` 数组：

```json
[
  {
    "name": "name",
    "description": "desc",
    "author": ["author"],
    "usage": ""
  }
]
```

## GET /module/:id

获取模块的详细属性，需指定模块 `id`。

## PUT /module/:id

启用一模块。

有如下的返回状态：

- `200`：启用成功。返回当前已**启用**的模块 `id` 列表。
- `403`：用户没有启用模块的权限。
- `404`：模块不存在。

## DELETE /module/:id

禁用一模块。

有如下的返回状态：

- `200`：禁用成功。返回当前已**启用**的模块 `id` 列表。
- `403`：用户没有禁用模块的权限。
- `404`：模块不存在。
- `409`：存在正在使用该模块的 Pipeline 或 Workflow。

## PUT /module/:id/:pipe

启用一管道。

有如下的返回状态：

- `200`：启用成功。返回该模块当前已**启用**的管道 `id` 列表。
- `403`：用户没有启用管道的权限。
- `404`：模块或管道不存在。

## DELETE /module/:id/:pipe

禁用一管道。

有如下的返回状态：

- `200`：禁用成功。返回该模块当前已**启用**的管道 `id` 列表。
- `403`：用户没有禁用管道的权限。
- `404`：模块或管道不存在。
- `409`：存在正在使用该管道的 Pipeline 或 Workflow。